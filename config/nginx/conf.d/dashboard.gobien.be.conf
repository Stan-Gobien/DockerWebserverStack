server {
        listen                          [::]:443 ssl http2;
        listen                          443 ssl http2;
        listen                          [::]:80;
        listen                          80;

        server_name                     dashboard.gobien.be;

        #root                            /data/vhosts/www.gobien.be/;
        #index                           index.html index.htm index.php;

        #HTTPS certificate settings
        ssl_certificate                 /certificates/gobien.be/fullchain.cer;
        ssl_certificate_key             /certificates/gobien.be/gobien.be.key;

        #HTTPS common settings
        include                         /etc/nginx/global/global-https.conf;

        #HTTP to HTTPS
        include                         /etc/nginx/global/global-http-to-https.conf;

        #Strict Transport Security HSTS
        add_header                      Strict-Transport-Security "max-age=15768000";

        #Global
        #include                         /etc/nginx/global/global.conf;

        location / {
                # Required to proxy the connection to Cockpit
                proxy_pass https://cloud01.gobien.be:9090;
                proxy_set_header Host $host;
                proxy_set_header X-Forwarded-Proto $scheme;

                # Required for web sockets to function
                proxy_http_version 1.1;
                proxy_buffering off;
                proxy_set_header Upgrade $http_upgrade;
                proxy_set_header Connection "upgrade";

                # Pass ETag header from Cockpit to clients.
                # See: https://github.com/cockpit-project/cockpit/issues/5239
                gzip off;
        }

}
